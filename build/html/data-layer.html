

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data Layer &mdash; OriginTrail Documentation (v2.0) 0.9.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Network structure" href="network-structure.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> OriginTrail Documentation (v2.0)
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">GENERAL</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Layer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#underlying-technology-and-technical-rationale">Underlying technology and technical rationale</a></li>
<li class="toctree-l2"><a class="reference internal" href="#entities-in-graph-structure-ontology">Entities in graph structure (ontology)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#objects-and-objectclasses">Objects and ObjectClasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#events-and-eventclasses">Events and EventClasses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#identifiers">Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connections">Connections</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="network-structure.html">Network structure</a></li>
</ul>
<p class="caption"><span class="caption-text">NODE SETUP</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="node-setup.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="wallet-setup.html">Identity Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Configuration-setup.html">Node Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="import-data.html">Import data</a></li>
</ul>
<p class="caption"><span class="caption-text">API REFERENCE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html">Introduction to API</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html#import">Import</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html#replication">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html#network-read">Network Read</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html#local-read">Local Read</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html#local-search">Local Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html#profile-token-management">Profile Token Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html#consensus-check">Consensus check</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-api.html#node-information">Node information</a></li>
</ul>
<p class="caption"><span class="caption-text">IMPLEMENTATION</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="implementation.html">Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-structure-guidelines.html">Data Structure Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="namespace.html">Namespace</a></li>
</ul>
<p class="caption"><span class="caption-text">CONTRIBUTION GUIDELINES</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribution-guidelines.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribution-guidelines.html#pull-requests">Pull Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribution-guidelines.html#contributor-code-of-conduct">Contributor Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribution-guidelines.html#questions-bugs-features">Questions, Bugs, Features</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OriginTrail Documentation (v2.0)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Data Layer</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/data-layer.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data-layer">
<span id="id1"></span><h1>Data Layer<a class="headerlink" href="#data-layer" title="Permalink to this headline">¶</a></h1>
<p>The purpose of this document is to explain the data structures of the
OriginTrail protocol data layer. OriginTrail is a purpose built protocol
for trusted supply chain data sharing, utilizing GS1 standards and based
on blockchain.</p>
<p>The following abstractions are based on the observations from several
years of working with supply chain transparency solutions. The aim of
the abstraction is to be generic enough to support any present and
future use cases involving supply chain event visibility and data
exchange, while on the other hand being as tailored as possible to
provide optimal technical performance to support such cases.</p>
<div class="section" id="underlying-technology-and-technical-rationale">
<h2>Underlying technology and technical rationale<a class="headerlink" href="#underlying-technology-and-technical-rationale" title="Permalink to this headline">¶</a></h2>
<p>The OriginTrail Decentralized Network (ODN) Data Layer is intended to
provide data interoperability (between different data providers - i.e.
supply chain stakeholders), as well as easy interconnectivity between
different data sets regardless of their source. This suggests that the
very nature of data structures in play is as much about the information
itself, as it is about the connections between the data provided from
different sources. Network structure consists of incentivised nodes (<a class="reference internal" href="network-structure.html#incentive-model"><span class="std std-ref">Network structure</span></a>).</p>
<p>During the years of building supply chain transparency solutions we have
come to the conclusion that the most adequate data structure is a graph,
where the connections between data points are “first-class citizens” of
the structure. Our previous implementations involved relational
databases which have proven to be suboptimal, finally converging towards
graph logic emulation within the table structures. A native graph
database has shown to be superior in terms of the problems OriginTrail
is tackling.</p>
<p>A graph is ideal to represent the chain of custody on every trackable
element in the supply chain, its properties over time and its
interactions with facilities, transportation devices, companies and
people. The structure of supply chain data in the graphs of the data
layer is subject of this document and is based on GS1 standards, but not
exclusive to other standardization schemes and aims to be standard
inclusive.</p>
<p>It is important to note that these graph abstractions are not dependent
on the specific implementation of the underlying graph database. The
data layer is intended to be “plug-and-play” in this regard, allowing
the choice of the underlying database as long as it can support the
structures and features needed by the data layer. Introducing data to
the Data layer. In this way the system can be extended to support future data formats
and providers.</p>
<p>Once the data gets converted into graph form and stored in the database,
its fingerprint is stored on the blockchain. This process, as well as
the specific details on importer implementations, are out of the scope
of this document, but will be subject of further documentation.</p>
</div>
<div class="section" id="entities-in-graph-structure-ontology">
<h2>Entities in graph structure (ontology)<a class="headerlink" href="#entities-in-graph-structure-ontology" title="Permalink to this headline">¶</a></h2>
<p>OriginTrail data layer defines its own graph ontology for representation of supply chain entities and relations between them. The documents, representing graph vertices and edges are stored in the graph database, structured with a specific JSON form that helps sustain data immutability and supports system functionalities such are searches and traversals. OriginTrail graph ontology contains three groups of entities, represented as vertices:</p>
<ul class="simple">
<li><strong>Object Class</strong> and <strong>Event Class</strong> vertices</li>
<li><strong>Objects</strong> and <strong>Event</strong> objects instances</li>
<li><strong>Identifiers</strong></li>
</ul>
<p>The entities are connected with connections represented as edges.</p>
<div class="section" id="objects-and-objectclasses">
<h3>Objects and ObjectClasses<a class="headerlink" href="#objects-and-objectclasses" title="Permalink to this headline">¶</a></h3>
<p>Objects represent all physical or digital entities involved in events in the supply chain.
Examples of objects are vehicles, production facilities, documents, sensors, personnel etc.
ObjectClasses specifically define a global set of properties for their child Objects (as their “instances”).
In the example of a wine authenticity use case, the data shared among supply chain entities (winery, distributors, retailers etc) involves information about specific batches of bottles with unique characteristics.
The master data about a product would present an ObjectClass node in the OT graph, while the specifics about the product batch would be contained within the “batch” Object.
This allows for a hierarchical organization of objects, with a simplistic but robust class-like inheritance.</p>
<p>Object Classes are divided in:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><strong>Actors</strong>,</dt>
<dd>which encompass companies, people, machines and any other entity that can act or observe objects within the supply chain. (the “Who”)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Products</strong></dt>
<dd>(supply chain objects of interest), which represent goods or services that are acted upon by actors (the “What”)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Locations</strong>,</dt>
<dd>which define either physical or digital locations of products or actors (the “Where”)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Batches</strong>,</dt>
<dd>physical units of products</dd>
</dl>
</li>
</ul>
<p>Each of the Objects can then be further explained by custom defined subcategories.</p>
</div>
<div class="section" id="events-and-eventclasses">
<h3>Events and EventClasses<a class="headerlink" href="#events-and-eventclasses" title="Permalink to this headline">¶</a></h3>
<p>Events in the graph structure have a similar inheritance pattern – Event Classes classify types of events which are instantiated as particular Event nodes.
OriginTrail currently classifies 4 different event types:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><strong>Transport events</strong>,</dt>
<dd>which explain the physical or digital relocation of objects in the supply chain.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Transformation events</strong>,</dt>
<dd>which contain information about the transformation of one or more objects into (a new) one. An example would be the case of an electronic device (i.e. mobile phone), where the assembly is observed as a transformation event of combining different components – Objects - into one output Object, or the case of combining a set of SKUs in one group entity such as a transportation pallet. Similarly, a digital transformation event would be any type of processing of a digital product (i.e. mastering of a digital sound recording). This event type corresponds to GS1 AggregationEvents and TransformationEvents.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Observation events</strong>,</dt>
<dd>which entail any type of observational activity such as temperature tracking via sensors or laboratory tests. This event corresponds to GS1 Object Events that are published by one party (interaction between different business entities is not the primary focus of the event).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Ownership/custody transfer events</strong>,</dt>
<dd>where the change of ownership or custody of Objects is distinctly explained. An example would be a sale event.</dd>
</dl>
</li>
</ul>
<p>Each of the events can then be further explained by custom defined subcategories and meta data.</p>
</div>
<div class="section" id="identifiers">
<h3>Identifiers<a class="headerlink" href="#identifiers" title="Permalink to this headline">¶</a></h3>
<p>The identifiers are special vertices that contain identification attributes that identify objects.
They contain type and value of a single identifier. One object can have multiple identifiers connected.</p>
</div>
<div class="section" id="connections">
<h3>Connections<a class="headerlink" href="#connections" title="Permalink to this headline">¶</a></h3>
<p>The connections are edges in the graph used to define connections between Objects, Object Classes, Events and Identifiers.
The connections are classified in 4 groups:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><strong>Inheritance connections</strong>,</dt>
<dd>(between Object Class and Object vertices, as well as between Event Class and Event vertices).
These connections define that an Object is an instance of ObjectClass, the isInstanceOf edge.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Involvement connections</strong>,</dt>
<dd>(between Object and Event vertices)
connect objects with events in which they are involved.
For example, a transformation event of production would have input objects, output objects, a location where the production took place etc.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>State connections</strong>,</dt>
<dd>(between two Object vertices)
connect two or more objects that are related in some way.
For example, an object can be owned by some supply chain actor.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Identification connections</strong>,</dt>
<dd>(between Object and Identifier vertices)
connect identifiers with object that they are identifying.</dd>
</dl>
</li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="network-structure.html" class="btn btn-neutral float-right" title="Network structure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, OriginTrail

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>